---
title: 简介
createTime: 2025/01/28 15:46:18
permalink: /wiki/molang/index/
icon: carbon:script
---

MoLang 是 mojang 官方为基岩版动画设计的一种极其简单的语言，我们可以通过 MoLang 实现各种复杂的动画。

为了更加清晰的说明什么是 MoLang，以及理解它的机制，我们从基岩版动画的机制说起。

基岩版动画的机制非常简单，在不同的时间点新建关键帧，设定某个组件的位置/旋转/缩放。当开始播放动画时，程序就会自动计算出补间动画，使组件从某个地方移动/旋转/缩放到另一个地方，从而做出动画的效果。

![5.png](https://s2.loli.net/2023/02/11/xykIWa7bTqSBnfm.png)

我们给每个关键帧设置的是一个具体的数字，决定了播放到此关键帧时，组件所处的位置/旋转的角度/缩放的大小

![6.png](https://s2.loli.net/2023/02/11/Uz8XTsCNJMcb3tZ.png)

但是一些特殊情况下，这个数字不一定是固定的。比如我们期望玩家手持物品时摆动角度为 30 度，但空手时摆动角度为 60 度，这时我们就可以使用 MoLang 表达式了。

一个常用的动画设计是显示/隐藏模型，比如我们期望在玩家穿戴头盔时，显示头盔组件。我们可以使用缩放功能来隐藏组件，当组件的 X Y Z 缩放均为 0 时，该组件就被隐藏了，所以我们可以在 BlockBench 里面这么写：

![7.png](https://s2.loli.net/2023/02/11/1gAHJNZfwmu6qzL.png)

这里的 `ysm.has_helmet` 就是一个 MoLang 参数，它会在玩家穿戴头盔时返回数字 1，而在没有穿戴头盔时返回数字 0，正好做到了我们想要的隐藏/显示功能。

一直以来，长发模型是一个极为头疼的问题。当玩家抬头时，长长的头发就会随头转动，直戳戳的穿入玩家的身体内。我们也可以用 MoLang 来巧妙的解决这个问题。思路如下：

1. 当玩家仰头时，头发不再随头转动，而是垂直向下（也就是头发旋转角度与头部正好相反，互相抵消）
2. 当玩家俯看时，头发随头转动（也就是旋转角度为 0）

那么我们就可以这样书写 MoLang 参数：

![8.png](https://s2.loli.net/2023/02/11/POS9uIYbKBfJwxi.png)

我们来逐条介绍这个参数的意思：

这是一个条件式的写法，它的格式是这样写的 `判断条件 ? 如果符合时返回的结果 : 如果不符时返回的结果`

```molang
(ysm.head_pitch > 0) ? -ysm.head_pitch : 0
```

`（ysm.head_pitch > 0）`：判断条件。玩家俯仰的角度是 -90 度到 90 度，这里判断玩家俯仰的角度是否大于 0 度，用括号括更加直观。

`-ysm.head_pitch`：当玩家俯仰角度大于 0 时（也就是抬头时），我们特意取反，把头发旋转角度抵消回去。

`0`：当玩家俯仰角度小于 0 时（也就是俯视时），我们将其变成 0，这样头发就会随头旋转。

当然，MoLang 本身还有更为复杂的用法，这里我们暂时不再赘述。这里给出官方相关文档：

- [字符串类型](https://bedrock.dev/zh/docs/stable/Molang#Strings)
- [自定义变量](https://bedrock.dev/zh/docs/stable/Molang#Variables)
- [空值合并运算符](https://wiki.mcbe-dev.net/zh-cn/Molang#??空值合并运算符)
- [二元条件运算符](https://wiki.mcbe-dev.net/zh-cn/Molang#关键字)
- [别名](https://bedrock.dev/zh/docs/stable/Molang#Aliases)
- [复杂表达式](https://wiki.mcbe-dev.net/zh-cn/Molang#基本语法)
- [作用域定界符](https://wiki.mcbe-dev.net/zh-cn/Molang#{}花括号作用域定界符)
- [loop 循环](https://wiki.mcbe-dev.net/zh-cn/Molang#loop)，[continue](https://wiki.mcbe-dev.net/zh-cn/Molang#continue)、[break](https://wiki.mcbe-dev.net/zh-cn/Molang#break)（for_each 也支持，但目前没用到）
- [结构体](https://wiki.mcbe-dev.net/zh-cn/Molang#结构体)
- [箭头表达式](https://wiki.mcbe-dev.net/zh-cn/Molang#->指针运算符)
